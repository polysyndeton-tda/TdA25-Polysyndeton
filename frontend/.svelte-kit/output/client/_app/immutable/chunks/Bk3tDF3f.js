var K=Object.defineProperty;var R=t=>{throw TypeError(t)};var V=(t,e,a)=>e in t?K(t,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[e]=a;var v=(t,e,a)=>V(t,typeof e!="symbol"?e+"":e,a),W=(t,e,a)=>e.has(t)||R("Cannot "+a);var T=(t,e,a)=>(W(t,e,"read from private field"),a?a.call(t):e.get(t)),$=(t,e,a)=>e.has(t)?R("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,a);import{$ as x,E as H,az as Q,aA as X,e as Y,u as ee,aB as te,aC as ae,aD as se,au as re,q as oe,F as j,aE as B,aF as Z,aG as ie,z as L,l as M,A as D}from"./DcSgunAn.js";import{g as ne,w as le}from"./BK38orX7.js";import{p as N}from"./D_PpuvHk.js";const ue=()=>performance.now(),m={tick:t=>requestAnimationFrame(t),now:()=>ue(),tasks:new Set};function G(){const t=m.now();m.tasks.forEach(e=>{e.c(t)||(m.tasks.delete(e),e.f())}),m.tasks.size!==0&&m.tick(G)}function ce(t){let e;return m.tasks.size===0&&m.tick(G),{promise:new Promise(a=>{m.tasks.add(e={c:t,f:a})}),abort(){m.tasks.delete(e)}}}function A(t,e){le(()=>{t.dispatchEvent(new CustomEvent(e))})}function de(t){if(t==="float")return"cssFloat";if(t==="offset")return"cssOffset";if(t.startsWith("--"))return t;const e=t.split("-");return e.length===1?e[0]:e[0]+e.slice(1).map(a=>a[0].toUpperCase()+a.slice(1)).join("")}function J(t){const e={},a=t.split(";");for(const s of a){const[r,o]=s.split(":");if(!r||o===void 0)break;const f=de(r.trim());e[f]=o.trim()}return e}const fe=t=>t;function ye(t,e,a,s){var r=(t&ae)!==0,o=(t&se)!==0,f=r&&o,S=(t&te)!==0,U=f?"both":r?"in":"out",g,u=e.inert,_=e.style.overflow,n,i;function w(){var l=ie,b=x;B(null),Z(null);try{return g??(g=a()(e,(s==null?void 0:s())??{},{direction:U}))}finally{B(l),Z(b)}}var c={is_global:S,in(){var l;if(e.inert=u,!r){i==null||i.abort(),(l=i==null?void 0:i.reset)==null||l.call(i);return}o||n==null||n.abort(),A(e,"introstart"),n=P(e,w(),i,1,()=>{A(e,"introend"),n==null||n.abort(),n=g=void 0,e.style.overflow=_})},out(l){if(!o){l==null||l(),g=void 0;return}e.inert=!0,A(e,"outrostart"),i=P(e,w(),n,0,()=>{A(e,"outroend"),l==null||l()})},stop:()=>{n==null||n.abort(),i==null||i.abort()}},h=x;if((h.transitions??(h.transitions=[])).push(c),r&&ne){var y=S;if(!y){for(var d=h.parent;d&&d.f&H;)for(;(d=d.parent)&&!(d.f&Q););y=!d||(d.f&X)!==0}y&&Y(()=>{ee(()=>c.in())})}}function P(t,e,a,s,r){var o=s===1;if(re(e)){var f,S=!1;return oe(()=>{if(!S){var h=e({direction:o?"in":"out"});f=P(t,h,a,s,r)}}),{abort:()=>{S=!0,f==null||f.abort()},deactivate:()=>f.deactivate(),reset:()=>f.reset(),t:()=>f.t()}}if(a==null||a.deactivate(),!(e!=null&&e.duration))return r(),{abort:j,deactivate:j,reset:j,t:()=>s};const{delay:U=0,css:g,tick:u,easing:_=fe}=e;var n=[];if(o&&a===void 0&&(u&&u(0,1),g)){var i=J(g(0,1));n.push(i,i)}var w=()=>1-s,c=t.animate(n,{duration:U});return c.onfinish=()=>{var h=(a==null?void 0:a.t())??1-s;a==null||a.abort();var y=s-h,d=e.duration*Math.abs(y),l=[];if(d>0){var b=!1;if(g)for(var O=Math.ceil(d/16.666666666666668),C=0;C<=O;C+=1){var q=h+y*_(C/O),F=J(g(q,1-q));l.push(F),b||(b=F.overflow==="hidden")}b&&(t.style.overflow="hidden"),w=()=>{var z=c.currentTime;return h+y*_(z/d)},u&&ce(()=>{if(c.playState!=="running")return!1;var z=w();return u(z,1-z),!0})}c=t.animate(l,{duration:d,fill:"forwards"}),c.onfinish=()=>{w=()=>s,u==null||u(s,1-s),r()}},{abort:()=>{c&&(c.cancel(),c.effect=null,c.onfinish=j)},deactivate:()=>{r=j},reset:()=>{s===0&&(u==null||u(1,0))},t:()=>w()}}const he="/api/v1",p=he,k=N({selected:!1}),ke=()=>{console.log("resetting game from shared"),k.selected=!1,k.uuid=Date.now(),k.apiResponse={board:Array(15).fill().map(()=>Array(15).fill("")),uuid:Date.now(),name:"Nová hra piškvorek",difficulty:"beginner"},k.selected=!0};async function Se(t){const e=await fetch(`${p}/games/${t}`);if(e.status==404)throw Error(`Úloha nebyla nalezena. 
 Pravděpodobně je to proto, že byla smazána.`);return await e.json()}async function Te(t){const e=await fetch(`${p}/games/${t}`,{method:"PUT",body:JSON.stringify({name:k.apiResponse.name,board:k.apiResponse.board,difficulty:k.apiResponse.difficulty}),headers:{"Content-Type":"application/json"}}),a=await e.json();return console.log("editPuzzle response",a),e.status==422&&alert(`Stav křižků neodpovídá stavu koleček nebo naopak.
 V tomto stavu není možné úlohu uložit`),e}async function je(t){return!!(await fetch(`${p}/games/${t}`,{method:"DELETE",headers:{"Content-Type":"text/plain;charset=UTF-8"}})).ok}const Ee={začátečník:"beginner",jednoduchá:"easy",pokročilá:"medium",těžká:"hard",nejtěžší:"extreme"},Ie={beginner:"začátečník",easy:"jednoduchá",medium:"pokročilá",hard:"těžká",extreme:"nejtěžší"},_e={beginner:1,easy:2,medium:3,hard:4,extreme:5},be={opening:"Zahájení",midgame:"Middle game",endgame:"Koncovka"},ze={"24 hodin":"24h","7 dní":"7d","3 měsíců":"3m","1 měsíce":"1m",neomezenou:""},Ae={"24h":"24 hodin","7d":"7 dní","3m":"3 měsíců","1m":"1 měsíce","":"neomezenou"};function Ne(t){if(t>0)return new Promise((e,a)=>{setTimeout(()=>{e(t)},t)})}var E,I;class me{constructor(){v(this,"token",localStorage.getItem("token"));$(this,E,L(N(localStorage.getItem("username"))));$(this,I,L(this.token!==null));v(this,"uuid",localStorage.getItem("uuid"));v(this,"isAdmin",localStorage.getItem("isAdmin"));v(this,"elo",localStorage.getItem("elo"));v(this,"wins",localStorage.getItem("wins"));v(this,"draws",localStorage.getItem("draws"));v(this,"losses",localStorage.getItem("losses"))}get name(){return M(T(this,E))}set name(e){D(T(this,E),N(e))}get loggedIn(){return M(T(this,I))}set loggedIn(e){D(T(this,I),N(e))}async login(e,a){const s=await fetch(`${p}/login`,{method:"POST",body:JSON.stringify({username:e,password:a}),headers:{"Content-Type":"application/json"}});if(s.ok)this.loggedIn=!0;else{if(s.status==404)throw Error(`Takového uživatele neznáme. 
 Zkontrolujte, zda jste v přihlašovacím jméně nenapsali překlep.`);if(s.status==401)throw Error("Zkontrolujte, zda jste v hesle nenapsali překlep.")}try{const r=await s.json();localStorage.setItem("token",r.token),localStorage.setItem("username",e),localStorage.setItem("uuid",r.uuid),localStorage.setItem("isAdmin",r.is_admin),this.token=r.token}catch(r){console.error(r)}}logout(){this.loggedIn=!1,this.token=null,this.name=null,localStorage.removeItem("token"),localStorage.removeItem("username"),localStorage.removeItem("uuid")}async signUp(e,a,s){const r=await fetch(`${p}/users`,{method:"POST",body:JSON.stringify({username:e,email:a,password:s,elo:400}),headers:{"Content-Type":"application/json"}}),o=await r.json();if(r.status==409){if(o.message=="User with this username already exists")throw Error(`Toto uživatelské jméno již někdo používá. 
 Zvolte jiné`);if(o.message=="User with this email already exists")throw Error(`Tento email již nějaký účet používá. 
 Zvolte jiný`)}if(r.status==400)throw Error("Vyplňte prosím všechna pole formuláře.");console.log("signUp response",o),this.name=e,this.elo=o.elo,this.wins=o.wins,this.draws=o.draws,this.losses=o.losses,this.uuid=o.uuid,localStorage.setItem("uuid",o.uuid),console.log("uuid",o.uuid),await this.login(e,s)}async delete(){const e=await fetch(`${p}/users/${this.uuid}`,{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.token}`}});if(e.status==404)throw Error(`Uživatel nenalezen 
 Pravděpodobně už jste účet smazali. 
 Obnovte stránku.`);return e.ok?(this.logout(),!0):!1}async editUser(e){console.log("Sending",JSON.stringify(e));const a=await fetch(`${p}/users/${this.uuid}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.token}`},body:JSON.stringify(e)});return await a.json(),!!a.ok}async changePassword(e){if(e==null)throw Error("Supply password string");let a={password:e};return await this.editUser(a)}async changeName(e){if(e==null||e==null)throw Error("Supply name string");let a={username:e};return await this.editUser(a)?(this.name=e,localStorage.setItem("username",e),!0):!1}async changeEmail(e){if(name==null||name==null)throw Error("Supply name string");let a={email:e};return await this.editUser(a)}async getUsers(){return await(await fetch(`${p}/users`,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.token}`}})).json()}}E=new WeakMap,I=new WeakMap;let Ue=new me;export{he as P,Ue as U,Ee as a,Ae as b,ze as c,Ie as d,Te as e,Se as f,k as g,_e as h,je as i,be as j,ke as r,ye as t,Ne as w};
