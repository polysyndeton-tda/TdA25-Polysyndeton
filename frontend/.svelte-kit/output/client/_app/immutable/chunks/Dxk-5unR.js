import{J as Z,K as ne,L as ae,M as D,h as x,N as fe,O as te,a as ie,b as se,l as X,P as ue,Q as le,R as B,T as H,d as S,U as _e,V as $,c as z,p as ve,W as F,X as G,Y as de,Z as K,_ as O,q as oe,$ as P,a0 as k,a1 as ce,a2 as L,a3 as Q,a4 as he,a5 as Ee,a6 as pe,a7 as Te,a8 as Ae,a9 as Ie}from"./DcSgunAn.js";const me=[];function Se(e,r=!1){return g(e,new Map,"",me)}function g(e,r,n,u,l=null){if(typeof e=="object"&&e!==null){var _=r.get(e);if(_!==void 0)return _;if(e instanceof Map)return new Map(e);if(e instanceof Set)return new Set(e);if(Z(e)){var f=Array(e.length);r.set(e,f),l!==null&&r.set(l,f);for(var v=0;v<e.length;v+=1){var E=e[v];v in e&&(f[v]=g(E,r,n,u))}return f}if(ne(e)===ae){f={},r.set(e,f),l!==null&&r.set(l,f);for(var c in e)f[c]=g(e[c],r,n,u);return f}if(e instanceof Date)return structuredClone(e);if(typeof e.toJSON=="function")return g(e.toJSON(),r,n,u,e)}if(e instanceof EventTarget)return e;try{return structuredClone(e)}catch{return e}}function Me(e,r){return r}function we(e,r,n,u){for(var l=[],_=r.length,f=0;f<_;f++)he(r[f].e,l,!0);var v=_>0&&l.length===0&&n!==null;if(v){var E=n.parentNode;Ee(E),E.append(n),u.clear(),w(e,r[0].prev,r[_-1].next)}pe(l,()=>{for(var c=0;c<_;c++){var o=r[c];v||(u.delete(o.k),w(e,o.prev,o.next)),Te(o.e,!v)}})}function ge(e,r,n,u,l,_=null){var f=e,v={flags:r,items:new Map,first:null},E=(r&F)!==0;if(E){var c=e;f=x?D(fe(c)):c.appendChild(te())}x&&ie();var o=null,C=!1,i=ue(()=>{var d=n();return Z(d)?d:d==null?[]:G(d)});se(()=>{var d=X(i),a=d.length;if(C&&a===0)return;C=a===0;let I=!1;if(x){var p=f.data===le;p!==(a===0)&&(f=B(),D(f),H(!1),I=!0)}if(x){for(var T=null,A,h=0;h<a;h++){if(S.nodeType===8&&S.data===_e){f=S,I=!0,H(!1);break}var t=d[h],s=u(t,h);A=j(S,v,T,null,t,s,h,l,r,n),v.items.set(s,A),T=A}a>0&&D(B())}x||xe(d,v,f,l,r,u,n),_!==null&&(a===0?o?$(o):o=z(()=>_(f)):o!==null&&ve(o,()=>{o=null})),I&&H(!0),X(i)}),x&&(f=S)}function xe(e,r,n,u,l,_,f){var J,V,Y,y;var v=(l&ce)!==0,E=(l&(L|k))!==0,c=e.length,o=r.items,C=r.first,i=C,d,a=null,I,p=[],T=[],A,h,t,s;if(v)for(s=0;s<c;s+=1)A=e[s],h=_(A,s),t=o.get(h),t!==void 0&&((J=t.a)==null||J.measure(),(I??(I=new Set)).add(t));for(s=0;s<c;s+=1){if(A=e[s],h=_(A,s),t=o.get(h),t===void 0){var ee=i?i.e.nodes_start:n;a=j(ee,r,a,a===null?r.first:a.next,A,h,s,u,l,f),o.set(h,a),p=[],T=[],i=a.next;continue}if(E&&Ce(t,A,s,l),t.e.f&O&&($(t.e),v&&((V=t.a)==null||V.unfix(),(I??(I=new Set)).delete(t))),t!==i){if(d!==void 0&&d.has(t)){if(p.length<T.length){var M=T[0],m;a=M.prev;var q=p[0],b=p[p.length-1];for(m=0;m<p.length;m+=1)W(p[m],M,n);for(m=0;m<T.length;m+=1)d.delete(T[m]);w(r,q.prev,b.next),w(r,a,q),w(r,b,M),i=M,a=b,s-=1,p=[],T=[]}else d.delete(t),W(t,i,n),w(r,t.prev,t.next),w(r,t,a===null?r.first:a.next),w(r,a,t),a=t;continue}for(p=[],T=[];i!==null&&i.k!==h;)i.e.f&O||(d??(d=new Set)).add(i),T.push(i),i=i.next;if(i===null)continue;t=i}p.push(t),a=t,i=t.next}if(i!==null||d!==void 0){for(var N=d===void 0?[]:G(d);i!==null;)i.e.f&O||N.push(i),i=i.next;var R=N.length;if(R>0){var re=l&F&&c===0?n:null;if(v){for(s=0;s<R;s+=1)(Y=N[s].a)==null||Y.measure();for(s=0;s<R;s+=1)(y=N[s].a)==null||y.fix()}we(r,N,re,o)}}v&&oe(()=>{var U;if(I!==void 0)for(t of I)(U=t.a)==null||U.apply()}),P.first=r.first&&r.first.e,P.last=a&&a.e}function Ce(e,r,n,u){u&L&&Q(e.v,r),u&k?Q(e.i,n):e.i=n}function j(e,r,n,u,l,_,f,v,E,c){var o=(E&L)!==0,C=(E&Ae)===0,i=o?C?de(l):K(l):l,d=E&k?K(f):f,a={i:d,v:i,k:_,a:null,e:null,prev:n,next:u};try{return a.e=z(()=>v(e,i,d,c),x),a.e.prev=n&&n.e,a.e.next=u&&u.e,n===null?r.first=a:(n.next=a,n.e.next=a.e),u!==null&&(u.prev=a,u.e.prev=a.e),a}finally{}}function W(e,r,n){for(var u=e.next?e.next.e.nodes_start:n,l=r?r.e.nodes_start:n,_=e.e.nodes_start;_!==u;){var f=Ie(_);l.before(_),_=f}}function w(e,r,n){r===null?e.first=n:(r.next=n,r.e.next=n&&n.e),n!==null&&(n.prev=r,n.e.prev=r&&r.e)}export{ge as e,Me as i,Se as s};
