import{t as b,a as n,b as x,c as be}from"../chunks/Ba07GB51.js";import{B as we,y as V,C as ke,x as o,l as e,z as m,D as z,G as P,n as W,A as r,I as F,H as Z}from"../chunks/DcSgunAn.js";import{d as ge,s as X}from"../chunks/BK38orX7.js";import{a as p,p as h}from"../chunks/D_PpuvHk.js";import{r as T}from"../chunks/DUR6UqLw.js";import{t as Y}from"../chunks/Cho7X1U_.js";import{b as C}from"../chunks/Dmh89Whc.js";import{U as u,w as ee}from"../chunks/Bk3tDF3f.js";import{C as ye}from"../chunks/CEdGvMEb.js";import{T as ae}from"../chunks/BXAdBgQj.js";import{A as je}from"../chunks/Dx8HbrOT.js";var $e=(c,v,i)=>v(()=>u.changeName(e(i)),"Uživatelské jméno bylo změněno","Nastala chyba. Zkuste to později."),xe=b("<p>Shoduje se to, můžete to potvrdit :) ⬇️</p>"),ze=b("<p>Hesla se neshodují!</p>"),Pe=(c,v,i)=>v(()=>u.changePassword(e(i)),"Heslo bylo změneno","Nastala chyba. Zkuste to později."),Ze=(c,v,i)=>v(()=>u.changeEmail(e(i)),"Emailová adresa byla změněna","Nastala chyba. Zkuste to později."),Te=(c,v)=>r(v,!0),Ce=b('<div class="centerBox svelte-ialfom"><h1>Můj účet</h1> <h2>Úprava údajů:</h2> <details class="svelte-ialfom"><summary class="svelte-ialfom">Změnit Uživatelské jméno</summary> <label for="username">Zadejte svoje nové uživatelské jméno</label> <br> <input id="username" type="text"> <button>Potvrdit</button></details> <details class="svelte-ialfom"><summary class="svelte-ialfom">Změnit heslo</summary> <form autocomplete="off"></form> <label for="password">Zadejte svoje nové heslo&nbsp;&nbsp;</label> <input id="password" name="heslo" autocomplete="new-password" type="password" class="svelte-ialfom"> <br> <br> <label for="password2">Ještě jednou pro kontrolu</label> <input id="password2" name="heslo2" autocomplete="new-password" type="password" class="svelte-ialfom"> <br> <br> <!> <button>Potvrdit</button></details> <details class="svelte-ialfom"><summary class="svelte-ialfom">Změnit email</summary> <label for="email">Zadejte svoji novou emailovou adresu</label> <br> <input id="email" type="email"> <button>Potvrdit</button></details> <button>Smazat účet</button></div>'),Ee=b('<h1 class="center">Pro zobrazení se přihlaste</h1>'),Ne=b("<!> <!> <!> <!> <!>",1);function Oe(c,v){we(v,!0);let i=m(!1),E=m(!1);async function te(){await u.delete()&&(r(E,!0),u.logout(),await ee(2600),r(E,!1))}async function N(a,s,d){try{await a()?r(M,h(s)):r(M,h(d)),r(D,!0),await ee(2600),r(D,!1)}catch(t){r(H,h(t)),console.error(t),(t.name=="TypeError"&&t.message=="Failed to fetch"||t.name=="TypeError"&&t.message=="NetworkError when attempting to fetch resource.")&&r(H,"Nejste připojeni k internetu."),r(g,!0)}}let U=m(""),f=m(""),w=m(""),A=m(""),k=W(()=>e(f)==e(w)),_=W(()=>e(f).length>0&&e(w).length>0),D=m(!1),M=m(""),g=m(!1),H=m("");var J=Ne(),O=V(J);{var se=a=>{var s=Ce(),d=o(z(s),4),t=o(z(d),6);T(t);var ve=o(t,2);ve.__click=[$e,N,U],P(d);var B=o(d,2),y=o(z(B),6);T(y);var j=o(y,8);T(j);var Q=o(j,6);{var de=l=>{var $=xe();n(l,$)},pe=l=>{var $=be(),fe=V($);{var _e=S=>{var he=ze();n(S,he)};p(fe,S=>{e(_)&&S(_e)},!0)}n(l,$)};p(Q,l=>{e(k)&&e(_)?l(de):l(pe,!1)})}var R=o(Q,2);R.__click=[Pe,N,f],P(B);var G=o(B,2),I=o(z(G),6);T(I);var ue=o(I,2);ue.__click=[Ze,N,A],P(G);var ce=o(G,2);ce.__click=[Te,i],P(s),F(()=>{Y(y,"ok",e(k)&&e(_)),Y(j,"ok",e(k)&&e(_)),R.disabled=!(e(k)&&e(_))}),C(t,()=>e(U),l=>r(U,l)),C(y,()=>e(f),l=>r(f,l)),C(j,()=>e(w),l=>r(w,l)),C(I,()=>e(A),l=>r(A,l)),n(a,s)},oe=a=>{var s=Ee();n(a,s)};p(O,a=>{u.loggedIn?a(se):a(oe,!1)})}var q=o(O,2);{var re=a=>{ye(a,{okCallback:te,get show(){return e(i)},set show(s){r(i,h(s))},children:(s,d)=>{Z();var t=x("Opravdu chcete smazat účet? Tato akce není vratná!");n(s,t)},$$slots:{default:!0}})};p(q,a=>{e(i)&&a(re)})}var K=o(q,2);{var le=a=>{ae(a,{children:(s,d)=>{Z();var t=x("Účet smazán");n(s,t)},$$slots:{default:!0}})};p(K,a=>{e(E)&&a(le)})}var L=o(K,2);{var ie=a=>{ae(a,{children:(s,d)=>{Z();var t=x();F(()=>X(t,e(M))),n(s,t)},$$slots:{default:!0}})};p(L,a=>{e(D)&&a(ie)})}var ne=o(L,2);{var me=a=>{je(a,{get show(){return e(g)},set show(s){r(g,h(s))},children:(s,d)=>{Z();var t=x();F(()=>X(t,e(H))),n(s,t)},$$slots:{default:!0}})};p(ne,a=>{e(g)&&a(me)})}n(c,J),ke()}ge(["click"]);export{Oe as component};
