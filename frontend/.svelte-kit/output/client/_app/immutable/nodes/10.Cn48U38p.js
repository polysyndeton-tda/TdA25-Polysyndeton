import{t as w,c as ee,a as o,n as he,b as ue}from"../chunks/Ba07GB51.js";import"../chunks/dQE67XWY.js";import{B as V,l as e,y as M,G as f,C as J,i as ie,n as me,u as Ce,D as _,x as m,H as ne,I as E,aP as L,aQ as Se,aR as O,m as W,A as D,z as oe}from"../chunks/DcSgunAn.js";import{d as ye,s as H,e as Y}from"../chunks/BK38orX7.js";import{e as Q,i as te,s as fe}from"../chunks/Dxk-5unR.js";import{a as B,b as T,p as $}from"../chunks/D_PpuvHk.js";import{r as pe,b as j}from"../chunks/DUR6UqLw.js";import{o as be}from"../chunks/y0YWbF4N.js";import{d as ke,b as K,c as Ae,h as Ie,P as je,i as Pe,w as De,j as Be,g as ge}from"../chunks/Bk3tDF3f.js";import{a as Ee,b as Te}from"../chunks/Dmh89Whc.js";import{i as Ge,s as qe}from"../chunks/B7C0I3Mn.js";import{T as Le}from"../chunks/BXAdBgQj.js";import{i as $e}from"../chunks/DLP3XPUu.js";import{C as Me}from"../chunks/CEdGvMEb.js";var Ne=w('<div class="field svelte-1gqpan1"></div>'),Fe=w('<div class="field X svelte-1gqpan1"></div>'),Re=w('<div class="field O svelte-1gqpan1"></div>'),Oe=w('<div class="row svelte-1gqpan1"></div>'),Ue=w('<div class="grid svelte-1gqpan1"></div>');function Ze(c,r){V(r,!0);var t=Ue();Q(t,21,()=>r.boardApiInfo.board,te,(a,v)=>{var u=Oe();Q(u,21,()=>e(v),te,(A,x)=>{var i=ee(),n=M(i);{var P=z=>{var b=Ne();o(z,b)},y=z=>{var b=ee(),C=M(b);{var S=d=>{var l=Fe();o(d,l)},h=d=>{var l=ee(),s=M(l);{var p=g=>{var N=Re();o(g,N)};B(s,g=>{e(x)=="O"&&g(p)},!0)}o(d,l)};B(C,d=>{e(x)=="X"?d(S):d(h,!1)},!0)}o(z,b)};B(n,z=>{e(x)==""?z(P):z(y,!1)})}o(A,i)}),f(u),o(a,u)}),f(t),o(c,t),J()}var He=w('<div style="display: inline;white-space: nowrap;"><label class="svelte-kckx6e"><input type="checkbox" class="svelte-kckx6e"> </label></div> <br>',1),Xe=(c,r)=>{r(r().filters.date_filter=Ae[c.target.value],!0)},Ke=w('<div class="filterContainer svelte-kckx6e"><div><h3 class="svelte-kckx6e">Obt√≠≈ænost:</h3> <fieldset></fieldset></div> <div class="secondColumn"><label class="svelte-kckx6e"><h3 class="svelte-kckx6e">N√°zev hry:</h3> <input class="textfield svelte-kckx6e" type="text"></label> <label class="svelte-kckx6e"><h3 class="svelte-kckx6e">Za dobu:</h3> <select class="svelte-kckx6e"><option>24 hodin</option><option>7 dn√≠</option><option>1 mƒõs√≠ce</option><option>3 mƒõs√≠c≈Ø</option><option>neomezenou</option></select></label></div></div>');function Qe(c,r){V(r,!0);let t=T(r,"filterState",15),a=me(()=>t().filters.difficulty);console.log("init state",fe(t().filters.difficulty));const v=["beginner","easy","medium","hard","extreme"];let u=$(Array(5).fill(!1)),A=me(()=>(t().filters.difficulty.length==v.length||t().filters.difficulty.length==0)&&t().filters.name==""&&t().filters.date_filter==""?(console.log("filter not active"),!1):(console.log("filter active"),!0));ie(()=>{t(t().used=e(A),!0)}),be(()=>{console.log("initialise displayList for checkboxes to use");let h=e(a);for(const[d,l]of v.entries())h.includes(l)?u[d]=!0:u[d]=!1}),ie(()=>{console.log("build allowed difficulty list to send to API"),t(t().filters.difficulty=[],!0);for(const[h,d]of u.entries())Ce(()=>{d==!0&&t().filters.difficulty.push(v[h])})});var x=Ke(),i=_(x),n=m(_(i),2);Q(n,21,()=>v,te,(h,d,l)=>{var s=He(),p=M(s),g=_(p),N=_(g);pe(N);var ae=m(N);f(g),f(p),ne(2),E(()=>H(ae,` ${ke[e(d)]??""}`)),Ee(N,()=>u[l],le=>u[l]=le),o(h,s)}),f(n),f(i);var P=m(i,2),y=_(P),z=m(_(y),2);pe(z),f(y);var b=m(y,2),C=m(_(b),2);C.__change=[Xe,t],Ge(C,()=>K[t().filters.date_filter]);var S;f(b),f(P),f(x),E(()=>{S!==(S=K[t().filters.date_filter])&&(C.value=(C.__value=K[t().filters.date_filter])==null?"":K[t().filters.date_filter],qe(C,K[t().filters.date_filter]))}),Te(z,()=>t().filters.name,h=>t(t().filters.name=h,!0)),o(c,x),J()}ye(["change"]);const _e=c=>typeof c=="number"&&c===Number(c)&&Number.isFinite(c),Ve=()=>"_"+Math.random().toString(36).substr(2,9);var Je=he('<defs><linearGradient x1="0%" y1="0%" x2="100%" y2="0%"><stop offset="0%"></stop><stop></stop><stop></stop></linearGradient></defs>'),We=he(`<svg xmlns="http://www.w3.org/2000/svg" width="249.748" viewBox="0 -10 187.673 179.503" height="239.338" class="svelte-7nhlqv"><!><path d="M187.183 57.47a9.955 9.955 0
    00-8.587-6.86l-54.167-4.918-21.42-50.134a9.978 9.978 0 00-9.172-6.052 9.972
    9.972 0 00-9.172 6.061l-21.42 50.125L9.07 50.611a9.973 9.973 0 00-8.578
    6.858 9.964 9.964 0 002.917 10.596l40.944 35.908-12.073 53.184a9.97 9.97 0
    003.878 10.298A9.953 9.953 0 0042 169.357a9.937 9.937 0
    005.114-1.424l46.724-27.925 46.707 27.925a9.936 9.936 0 0010.964-.478 9.979
    9.979 0 003.88-10.298l-12.074-53.184 40.944-35.9a9.98 9.98 0
    002.925-10.604zm0 0"></path></svg>`);function Ye(c,r){let t=T(r,"id",8),a=T(r,"full",8),v=T(r,"fullColor",8,"#ffcf00"),u=T(r,"emptyColor",8,"#7f7f7f");const x=`${T(r,"size",8,20)()}px`,i=x;var n=We();j(n,"style",`--width:${x??""};--height:${i??""}`);var P=_(n);{var y=b=>{var C=Je(),S=_(C),h=_(S),d=m(h),l=m(d);f(S),f(C),E(()=>{j(S,"id",`grad-${t()??""}`),j(h,"style",`stop-color:${v()??""};stop-opacity:1`),j(d,"offset",`${a()*100}%`),j(d,"style",`stop-color:${v()??""};stop-opacity:1`),j(l,"offset",`${a()*100}%`),j(l,"style",`stop-color:${u()??""};stop-opacity:1`)}),o(b,C)};B(P,b=>{a()!==1&&a()!==0&&b(y)})}var z=m(P);f(n),E(()=>j(z,"fill",a()===1?v():a()===0?u():`url(#grad-${t()})`)),o(c,n)}var et=w('<span class="svelte-g1srw1"> </span>'),tt=w('<div class="svelte-g1srw1"><!> <!></div>');function at(c,r){V(r,!1);const t=O(),a=O(),v=O(),u=O(),A=O(),x=O(),i=O();let n=T(r,"rating",8),P=T(r,"style",8,""),y=T(r,"config",24,()=>({}));const z=Ve(),b=y().size&&_e(y().size)?y().size:20,C=b/2<16?16:b/2;L(()=>W(n()),()=>{if(!_e(n())||n()<0||n()>5)throw new Error("rating value is not valid! üôÖ‚Äç‚ôÄÔ∏è")}),L(()=>W(n()),()=>{D(t,Math.floor(n()))}),L(()=>(W(n()),e(t)),()=>{D(a,n()-e(t))}),L(()=>W(n()),()=>{D(v,Math.floor(5-n()))}),L(()=>e(t),()=>{D(u,Array(e(t)).fill(1))}),L(()=>e(a),()=>{D(A,e(a)!==0?[e(a)]:[])}),L(()=>e(v),()=>{D(x,Array(e(v)).fill(0))}),L(()=>(e(u),e(A),e(x)),()=>{D(i,e(u).concat(e(A)).concat(e(x)))}),Se(),$e();var S=tt(),h=_(S);Q(h,1,()=>e(i),te,(s,p)=>{Ye(s,{id:z,get full(){return e(p)},get emptyColor(){return y().emptyColor},get fullColor(){return y().fullColor},size:b})});var d=m(h,2);{var l=s=>{var p=et();j(p,"style",`font-size:${C??""}px`);var g=_(p,!0);f(p),E(()=>H(g,n())),o(s,p)};B(d,s=>{y().showText&&s(l)})}f(S),E(()=>j(S,"style",P())),o(c,S),J()}var lt=w("<div><!></div>");function rt(c,r){V(r,!0);const t={emptyColor:"hsl(240, 80%, 85%)",fullColor:"#E31837",showText:!1,size:22},a="justify-content:center;padding: 10px 0 0 10px;";var v=lt(),u=_(v);at(u,{get rating(){return Ie[r.difficulty]},config:t,style:a}),f(v),E(()=>j(v,"title",ke[r.difficulty])),o(c,v),J()}var st=w("<p>Va≈°√≠m filtr≈Øm neodpov√≠d√° ≈æ√°dn√° √∫loha</p>"),ot=w("<p>Zat√≠m ≈æ√°dn√© √∫lohy nebyly vytvo≈ôeny</p>"),it=(c,r,t)=>{c.preventDefault(),r.game=t,r.showDialog=!0},nt=w('<a class="button holder svelte-ce0gjs" role="button" tabindex="0"><!> <div style="display: flex; justify-content:center;flex-grow: 1;width: 30vw;max-width: 225px;"><div class="center"><p class="btnlink title svelte-ce0gjs"> </p> <!> <p class="btnlink svelte-ce0gjs"> </p> <hr> <button class="button hasOwnClickHandler svelte-ce0gjs">Upravit</button> <button class="hasOwnClickHandler svelte-ce0gjs">Smazat</button></div></div></a>'),ft=w('<div class="games-container svelte-ce0gjs"></div>'),ct=w(`<!> <div class="all-container svelte-ce0gjs"><p class="infoFilter svelte-ce0gjs">Kdy≈æ ve filtru nech√°te v kategorii v√Ωbƒõr pr√°zdn√Ω, tak se filtr neaplikuje. 
        Tedy nechcete-li filtrovat podle obt√≠≈ænosti, m≈Ø≈æete vybrat buƒè v≈°echny kategorie nebo ≈æ√°dnou.
        Nechcete-li filtrovat podle n√°zvu, nechte pol√≠ƒçko pr√°zdn√©.</p> <br> <!></div>`,1),vt=w("<!> <!> <!>",1);function dt(c,r){V(r,!0);const t=je;let a=oe($([])),v=oe(!1);async function u(){const s=await(await fetch(`${t}/games`)).json();console.log(s),D(a,$(s)),D(v,!0)}let A=oe($({used:!1,filters:{difficulty:["beginner","easy","medium","hard","extreme"],name:"",date_filter:""}}));async function x(){const l=new URLSearchParams(e(A).filters),p=await(await fetch(`${t}/filter?${l.toString()}`)).json();D(a,$(p))}ie(()=>{x(e(A))}),be(u);let i=$({confirmed:!1,showDialog:!1,game:{}});async function n(l,s){await Pe(s)&&(i.confirmed=!0,console.log(fe(e(a))),D(a,$(e(a).filter(g=>g!==l))),console.log(fe(e(a))),De(2600).then(()=>i.confirmed=!1))}function P(l){console.log("entrar"),ge.apiResponse=e(a)[l],ge.selected=!0}var y=vt(),z=M(y);{var b=l=>{var s=ct(),p=M(s);Qe(p,{get filterState(){return e(A)},set filterState(G){D(A,$(G))}});var g=m(p,2),N=m(_(g),4);{var ae=G=>{var U=ee(),X=M(U);{var F=I=>{var Z=st();o(I,Z)},k=I=>{var Z=ot();o(I,Z)};B(X,I=>{e(A).used?I(F):I(k,!1)})}o(G,U)},le=G=>{var U=ft();Q(U,22,()=>e(a),X=>X,(X,F,k)=>{var I=nt();I.__touchstart=()=>P(e(k));var Z=_(I);Ze(Z,{get boardApiInfo(){return F}});var ce=m(Z,2),ve=_(ce),re=_(ve),we=_(re,!0);f(re);var de=m(re,2);rt(de,{get difficulty(){return F.difficulty}});var se=m(de,2),xe=_(se);f(se);var R=m(se,4);R.__touchstart=q=>{document.getElementById("i"+e(k)).href="/editor/"+e(a)[e(k)].uuid},R.__touchend=q=>{document.getElementById("i"+e(k)).href="/game/"+e(a)[e(k)].uuid},R.__keydown=q=>{q.preventDefault(),q.key=="Enter"&&(document.getElementById("i"+e(k)).href="/editor/"+e(a)[e(k)].uuid,document.getElementById("i"+e(k)).click())};var ze=m(R,2);ze.__click=[it,i,F],f(ve),f(ce),f(I),E(()=>{j(I,"id","i"+e(k)),j(I,"href","/game/"+e(a)[e(k)].uuid),H(we,F.name),H(xe,`Stav: ${Be[F.gameState]??""}`)}),Y("mouseenter",I,()=>P(e(k))),Y("mouseenter",R,q=>{document.getElementById("i"+e(k)).href="/editor/"+e(a)[e(k)].uuid}),Y("mouseleave",R,q=>{document.getElementById("i"+e(k)).href="/game/"+e(a)[e(k)].uuid}),Y("mousedown",R,q=>{q.preventDefault(),console.log(event.which)},!0),o(X,I)}),f(U),o(G,U)};B(N,G=>{e(a).length==0?G(ae):G(le,!1)})}f(g),o(l,s)};B(z,l=>{e(v)&&l(b)})}var C=m(z,2);{var S=l=>{Le(l,{children:(s,p)=>{ne();var g=ue();E(()=>H(g,`√öloha ${i.game.name??""} smaz√°na`)),o(s,g)},$$slots:{default:!0}})};B(C,l=>{i.confirmed&&l(S)})}var h=m(C,2);{var d=l=>{Me(l,{okCallback:()=>n(i.game,i.game.uuid),get show(){return i.showDialog},set show(s){i.showDialog=s},children:(s,p)=>{ne();var g=ue();E(()=>H(g,`Smazat √∫lohu "${i.game.name??""}"?`)),o(s,g)},$$slots:{default:!0}})};B(h,l=>{i.showDialog&&l(d)})}o(c,y),J()}ye(["touchstart","touchend","keydown","click"]);var ut=w('<h1 class="center">√ölohy</h1> <!>',1);function It(c){document.title="TdA - √ölohy";var r=ut(),t=m(M(r),2);dt(t,{}),o(c,r)}export{It as component};
